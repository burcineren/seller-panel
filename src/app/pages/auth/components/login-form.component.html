<!-- Global error -->
@if (error()) {
<div class="text-red-500 text-sm text-center mb-4">
  {{ error() }}
</div>
}

<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-6">
  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
    <input
      formControlName="email"
      type="email"
      placeholder="you@example.com"
      [class.border-red-500]="
        loginForm.controls.email.invalid && loginForm.controls.email.touched
      "
      class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
    @if (loginForm.controls.email.touched && loginForm.controls.email.invalid) {
    <p class="text-red-500 text-xs mt-1">
      <span *ngIf="loginForm.controls.email.errors?.['required']">
        Email zorunlu.
      </span>
      <span *ngIf="loginForm.controls.email.errors?.['email']">
        Geçerli bir email girin.
      </span>
    </p>
    }
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">Şifre</label>
    <input
      formControlName="password"
      type="password"
      placeholder="Şifreniz"
      [class.border-red-500]="
        loginForm.controls.password.invalid &&
        loginForm.controls.password.touched
      "
      class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
    @if (loginForm.controls.password.touched &&
    loginForm.controls.password.invalid) {
    <p class="text-red-500 text-xs mt-1">Şifre zorunlu.</p>
    }
  </div>

  <button
    type="submit"
    [disabled]="loading() || loginForm.invalid"
    class="w-full flex items-center justify-center py-3 font-semibold rounded-lg bg-blue-500 hover:bg-blue-600 text-white disabled:opacity-50 disabled:cursor-not-allowed"
  >
    @if (loading()) {
    <svg
      class="animate-spin h-5 w-5 mr-2 text-white"
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle
        class="opacity-25"
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="4"
      ></circle>
      <path
        class="opacity-75"
        fill="currentColor"
        d="M4 12a8 8 0 018-8v8H4z"
      ></path>
    </svg>
    } Giriş
  </button>
</form>
